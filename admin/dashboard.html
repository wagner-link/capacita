<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Capacita Arapiraca Admin</title>
    <link rel="icon" href="/src/imgs/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="admin.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700&family=PT+Serif:wght@400;700&display=swap" rel="stylesheet">
</head>
<body class="dashboard-page">
    <!-- Header -->
    <header class="admin-header">
        <div class="admin-container">
            <div class="header-content">
                <div class="header-left">
                    <img src="/src/imgs/logo-arp.png" alt="Logo Capacita TG" class="header-logo">
                    <h1>Painel Administrativo</h1>
                </div>
                <div class="header-right">
                    <span class="admin-user">Administrador</span>
                    <button class="btn btn-secondary" id="logoutBtn">Sair</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="admin-nav">
        <div class="admin-container">
            <div class="nav-tabs">
                <button class="nav-tab active" data-section="courses">
                    <span class="nav-icon">📚</span>
                    Cursos
                </button>
                <button class="nav-tab" data-section="reorder">
                    <span class="nav-icon">🔄</span>
                    Ordenar Cursos
                </button>
                <button class="nav-tab" data-section="students">
                    <span class="nav-icon">🎓</span>
                    Alunos
                </button>
                <button class="nav-tab" data-section="companies">
                    <span class="nav-icon">🏢</span>
                    Empresas
                </button>
                <button class="nav-tab" data-section="history">
                    <span class="nav-icon">📋</span>
                    Histórico
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="admin-main">
        <div class="admin-container">
            <!-- Courses Section -->
            <div class="content-section active" id="coursesSection">
                <!-- Dashboard Header -->
                <div class="dashboard-header">
                    <h2>Gerenciamento de Cursos</h2>
                    <button class="btn btn-primary" id="addCourseBtn">
                        <span class="btn-icon">+</span>
                        Adicionar Novo Curso
                    </button>
                </div>

            <!-- Stats Cards -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">📚</div>
                    <div class="stat-content">
                        <h3 id="totalCourses">0</h3>
                        <p>Total de Cursos</p>
                    </div>
                </div>
                <div class="stat-card clickable-stat" data-area="empreend.html">
                    <div class="stat-icon">🚀</div>
                    <div class="stat-content">
                        <h3 id="empreendCourses">0</h3>
                        <p>Empreendedorismo</p>
                    </div>
                </div>
                <div class="stat-card clickable-stat" data-area="primeiroemprego.html">
                    <div class="stat-icon">💼</div>
                    <div class="stat-content">
                        <h3 id="jobCourses">0</h3>
                        <p>Primeiro Emprego</p>
                    </div>
                </div>
                <div class="stat-card clickable-stat" data-area="financ.html">
                    <div class="stat-icon">💰</div>
                    <div class="stat-content">
                        <h3 id="financeCourses">0</h3>
                        <p>Educação Financeira</p>
                    </div>
                </div>
                <div class="stat-card clickable-stat" data-area="novoemp.html">
                    <div class="stat-icon">👨‍🎓</div>
                    <div class="stat-content">
                        <h3 id="NewjobCourses">0</h3>
                        <p>Novo Emprego</p>
                    </div>
                </div>
                <div class="stat-card clickable-stat" data-area="habitos.html">
                    <div class="stat-icon">🥗</div>
                    <div class="stat-content">
                        <h3 id="habitosCourses">0</h3>
                        <p>Hábitos Saudáveis</p>
                    </div>
                </div>
            </div>

            <!-- Courses Table -->
            <div class="table-container">
                <div class="table-header">
                    <h3>Lista de Cursos</h3>
                    <div class="table-filters">
                        <select id="pageFilter" class="filter-select">
                            <option value="">Todas as páginas</option>
                            <option value="empreend.html">Empreendedorismo</option>
                            <option value="primeiroemprego.html">Primeiro Emprego</option>
                            <option value="novoemp.html">Novo Emprego</option>
                            <option value="financ.html">Educação Financeira</option>
                            <option value="habitos.html">Hábitos Saudáveis</option>
                        </select>
                        <select id="sortFilter" class="filter-select">
                            <option value="created_desc">Mais recentes</option>
                            <option value="created_asc">Mais antigos</option>
                            <option value="title_asc">Título A-Z</option>
                            <option value="title_desc">Título Z-A</option>
                            <option value="category_asc">Categoria A-Z</option>
                            <option value="category_desc">Categoria Z-A</option>
                        </select>
                        <input type="text" id="searchInput" placeholder="Buscar cursos..." class="search-input">
                    </div>
                </div>

                <div class="table-wrapper">
                    <table class="courses-table" id="coursesTable">
                        <thead>
                            <tr>
                                <th>Título</th>
                                <th>Categoria</th>
                                <th>Página</th>
                                <th>Status</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody id="coursesTableBody">
                            <!-- Cursos seram carregados aqui -->
                        </tbody>
                    </table>
                </div>

                <div class="content-section" id="reorderSection">
                    <div class="dashboard-header">
                        <h2>Ordenar Cursos</h2>
                        <button class="btn btn-primary" id="saveOrderBtn">
                            <span class="btn-icon">💾</span>
                            Salvar Ordem
                        </button>
                    </div>
                    <div class="table-container">
                        <div class="table-header">
                            <h3>Arraste e Solte para reordenar</h3>
                        </div>
                        <ul class="reorder-list" id="reorderList">
                            </ul>
                        <div class="loading-state" id="reorderLoadingState" style="display: none;">
                            <div class="spinner"></div>
                            <p>Carregando cursos...</p>
                        </div>
                        <div class="empty-state" id="reorderEmptyState" style="display: none;">
                            <h3>Nenhum curso encontrado</h3>
                        </div>
                    </div>
                </div>

                <div class="loading-state" id="loadingState">
                    <div class="spinner"></div>
                    <p>Carregando cursos...</p>
                </div>

                <div class="empty-state" id="emptyState" style="display: none;">
                    <div class="empty-icon">📚</div>
                    <h3>Nenhum curso encontrado</h3>
                    <p>Adicione seu primeiro curso para começar.</p>
                </div>
            </div>
            </div>

            <!-- Students Section -->
            <div class="content-section" id="studentsSection">
                <div class="dashboard-header">
                    <h2>Gerenciamento de Alunos</h2>
                </div>

                <!-- Students Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">🎓</div>
                        <div class="stat-content">
                            <h3 id="totalStudents">0</h3>
                            <p>Total de Alunos</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">📧</div>
                        <div class="stat-content">
                            <h3 id="studentsThisMonth">0</h3>
                            <p>Cadastros este mês</p>
                        </div>
                    </div>
                </div>

                <!-- Students Table -->
                <div class="table-container">
                    <div class="table-header">
                        <h3>Lista de Alunos</h3>
                        <div class="table-filters">
                            <select id="studentCityFilter" class="filter-select">
                                <option value="">Todas as cidades</option>
                                <option value="Arapiraca">Arapiraca</option>
                                <option value="Penedo">Penedo</option>
                                <option value="São José da Laje">São José da Laje</option>
                                <option value="Palmeira dos Índios">Palmeira dos Índios</option>
                                <option value="Teotônio Vilela">Teotônio Vilela</option>
                                <option value="Maceió">Maceió</option>
                            </select>
                            <input type="text" id="studentSearchInput" placeholder="Buscar alunos..." class="search-input">
                        </div>
                    </div>

                    <table class="admin-table" id="studentsTable">
                        <thead>
                            <tr>
                                <th>👤 Aluno</th>
                                <th>🏙️ Cidade</th>
                                <th>👫 Sexo</th>
                                <th>📱 Telefone</th>
                                <th>📅 Cadastro</th>
                                <th>🎖️ Situação Militar</th>
                                <th>⚡ Status</th>
                                <th>🔧 Ações</th>
                            </tr>
                        </thead>
                        <tbody id="studentsTableBody">
                        </tbody>
                    </table>

                    <div class="loading-state" id="studentsLoadingState" style="display: none;">
                        <div class="spinner"></div>
                        <p>Carregando alunos...</p>
                    </div>

                    <div class="empty-state" id="studentsEmptyState" style="display: none;">
                        <div class="empty-icon">🎓</div>
                        <h3>Nenhum aluno encontrado</h3>
                        <p>Os alunos cadastrados aparecerão aqui.</p>
                    </div>
                </div>
            </div>

            <!-- Companies Section -->
            <div class="content-section" id="companiesSection">
                <div class="dashboard-header">
                    <h2>Gerenciamento de Empresas</h2>
                </div>

                <!-- Companies Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">🏢</div>
                        <div class="stat-content">
                            <h3 id="totalCompanies">0</h3>
                            <p>Total de Empresas</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">📈</div>
                        <div class="stat-content">
                            <h3 id="companiesThisMonth">0</h3>
                            <p>Cadastros este mês</p>
                        </div>
                    </div>
                </div>

                <!-- Companies Table -->
                <div class="table-container">
                    <div class="table-header">
                        <h3>Lista de Empresas</h3>
                        <div class="table-filters">
                            <select id="companyCityFilter" class="filter-select">
                                <option value="">Todas as cidades</option>
                                <option value="Arapiraca">Arapiraca</option>
                                <option value="Penedo">Penedo</option>
                                <option value="São José da Laje">São José da Laje</option>
                                <option value="Palmeira dos Índios">Palmeira dos Índios</option>
                                <option value="Teotônio Vilela">Teotônio Vilela</option>
                                <option value="Maceió">Maceió</option>
                            </select>
                            <input type="text" id="companySearchInput" placeholder="Buscar empresas..." class="search-input">
                        </div>
                    </div>

                    <table class="admin-table" id="companiesTable">
                        <thead>
                            <tr>
                                <th>🏢 Empresa</th>
                                <th>🏙️ Cidade</th>
                                <th>👫 Sexo</th>
                                <th>📅 Cadastro</th>
                                <th>⚡ Status</th>
                                <th>🔧 Ações</th>
                            </tr>
                        </thead>
                        <tbody id="companiesTableBody">
                        </tbody>
                    </table>

                    <div class="loading-state" id="companiesLoadingState" style="display: none;">
                        <div class="spinner"></div>
                        <p>Carregando empresas...</p>
                    </div>

                    <div class="empty-state" id="companiesEmptyState" style="display: none;">
                        <div class="empty-icon">🏢</div>
                        <h3>Nenhuma empresa encontrada</h3>
                        <p>As empresas cadastradas aparecerão aqui.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- History Section -->
        <div class="content-section" id="historySection">
            <div class="dashboard-header">
                <h2>Histórico de Alterações</h2>
            </div>

            <!-- History Table -->
            <div class="table-container">
                <div class="table-header">
                    <h3>Registro de Alterações</h3>
                    <div class="table-filters">
                        <input type="text" id="historyUserFilter" placeholder="Filtrar por usuário..." class="search-input">
                        <input type="date" id="historyDateFilter" class="filter-select">
                        <input type="text" id="historySearchInput" placeholder="Buscar alterações..." class="search-input">
                    </div>
                </div>

                <table class="admin-table" id="historyTable">
                    <thead>
                        <tr>
                            <th>📅 Data/Hora</th>
                            <th>👤 Usuário</th>
                            <th>📝 Alterações</th>
                            <th>👨‍💼 Alterado por</th>
                        </tr>
                    </thead>
                    <tbody id="historyTableBody">
                    </tbody>
                </table>

                <div class="loading-state" id="historyLoadingState" style="display: none;">
                    <div class="spinner"></div>
                    <p>Carregando histórico...</p>
                </div>

                <div class="empty-state" id="historyEmptyState" style="display: none;">
                    <div class="empty-icon">📋</div>
                    <h3>Nenhuma alteração encontrada</h3>
                    <p>O histórico de alterações aparecerá aqui.</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Course Modal -->
    <div class="modal-overlay" id="courseModal">
        <div class="modal modal-large">
            <div class="modal-header">
                <h3 id="modalTitle">Adicionar Novo Curso</h3>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            <div class="modal-content">
                <form id="courseForm" class="course-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="courseTitle">Título do Curso *</label>
                            <input type="text" id="courseTitle" name="title" required placeholder="Digite o título do curso">
                        </div>
                        <div class="form-group">
                            <label for="courseCategory">Categoria *</label>
                            <input type="text" id="courseCategory" name="category" required placeholder="Ex: Fundação Bradesco - 10 horas">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="courseDescription">Descrição *</label>
                        <textarea id="courseDescription" name="description" required placeholder="Descreva o curso..." rows="3"></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="courseImageUrl">URL da Imagem *</label>
                            <input type="url" id="courseImageUrl" name="imageUrl" required placeholder="https://exemplo.com/imagem.jpg">
                        </div>
                        <div class="form-group">
                            <label for="coursePage">Página de Destino *</label>
                            <select id="coursePage" name="page" required>
                                <option value="">Selecione uma página</option>
                                <option value="empreend.html">Empreendedorismo</option>
                                <option value="primeiroemprego.html">Primeiro Emprego</option>
                                <option value="novoemp.html">Novo Emprego</option>
                                <option value="financ.html">Educação Financeira</option>
                                <option value="habitos.html">Hábitos Saudáveis</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="courseUrl">URL do Curso *</label>
                        <input type="url" id="courseUrl" name="courseUrl" required placeholder="https://exemplo.com/curso">
                    </div>
                    
                    <div class="form-group">
                        <label for="downloadUrl">URL do Arquivo para Download (Opcional)</label>
                        <input type="url" id="downloadUrl" name="downloadUrl" placeholder="Deixe em branco se não for um download">
                    </div>

                    <div class="form-group">
                        <label for="buttonText">Texto do Botão</label>
                        <select id="buttonTextSelect" name="buttonTextSelect">
                            <option value="Inscreva-se">Inscreva-se</option>
                            <option value="Baixar">Baixar</option>
                            <option value="Saiba mais">Saiba mais</option>
                            <option value="Começar agora">Começar agora</option>
                            <option value="Acessar curso">Acessar curso</option>
                            <option value="custom">Personalizado</option>
                        </select>
                        <input type="text" id="customButtonText" name="customButtonText" placeholder="Digite o texto personalizado" style="display: none; margin-top: 0.5rem;">
                    </div>

                    <div class="image-preview" id="imagePreview" style="display: none;">
                        <img id="previewImg" src="" alt="Preview">
                    </div>
                </form>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" id="cancelBtn">Cancelar</button>
                <button type="submit" form="courseForm" class="btn btn-primary" id="saveBtn">
                    <span class="btn-text">Salvar Curso</span>
                    <span class="btn-loading" style="display: none;">
                        <span class="spinner"></span>
                        Salvando...
                    </span>
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de confirmação do delete -->
    <div class="modal-overlay" id="deleteModal">
        <div class="modal">
            <div class="modal-header danger">
                <h3>Confirmar Exclusão</h3>
            </div>
            <div class="modal-content">
                <p>Tem certeza que deseja excluir este curso?</p>
                <p><strong id="deleteCourseTitle"></strong></p>
                <p class="warning">Esta ação não pode ser desfeita.</p>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancelDeleteBtn">Cancelar</button>
                <button class="btn btn-danger" id="confirmDeleteBtn">
                    <span class="btn-text">Excluir</span>
                    <span class="btn-loading" style="display: none;">
                        <span class="spinner"></span>
                        Excluindo...
                    </span>
                </button>
            </div>
        </div>
    </div>

    <!-- Student Details Modal -->
    <div class="modal-overlay" id="studentModal">
        <div class="modal modal-large">
            <div class="modal-header">
                <h3>Detalhes do Aluno</h3>
                <button class="modal-close" id="closeStudentModal">&times;</button>
            </div>
            <div class="modal-content">
                <div class="student-details" id="studentDetails">
                    <!-- Student details will be populated here -->
                </div>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" id="closeStudentDetailsBtn">Fechar</button>
            </div>
        </div>
    </div>

    <!-- Company Details Modal -->
    <div class="modal-overlay" id="companyModal">
        <div class="modal modal-large">
            <div class="modal-header">
                <h3>Detalhes da Empresa</h3>
                <button class="modal-close" id="closeCompanyModal">&times;</button>
            </div>
            <div class="modal-content">
                <div class="company-details" id="companyDetails">
                    <!-- Company details will be populated here -->
                </div>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" id="closeCompanyDetailsBtn">Fechar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Detalhes da Área -->
    <div class="modal-overlay" id="areaDetailsModal">
        <div class="modal modal-large">
            <div class="modal-header">
                <h3 id="areaDetailsTitle">Detalhes da Área</h3>
                <button class="modal-close" id="closeAreaDetailsModal">&times;</button>
            </div>
            <div class="modal-content">
                <div class="area-stats-grid">
                    <div class="area-stat-item">
                        <div class="area-stat-icon">📊</div>
                        <div class="area-stat-content">
                            <h4 id="areaTotalCourses">0</h4>
                            <p>Total de Cursos</p>
                        </div>
                    </div>
                    <div class="area-stat-item">
                        <div class="area-stat-icon">✅</div>
                        <div class="area-stat-content">
                            <h4 id="areaActiveCourses">0</h4>
                            <p>Cursos Ativos</p>
                        </div>
                    </div>
                    <div class="area-stat-item">
                        <div class="area-stat-icon">📅</div>
                        <div class="area-stat-content">
                            <h4 id="areaLastUpdate">-</h4>
                            <p>Última Atualização</p>
                        </div>
                    </div>
                </div>
                
                <div class="recent-courses-section">
                    <h4>Cursos Mais Recentes</h4>
                    <div id="recentCoursesList" class="recent-courses-list">
                        <!-- Lista será preenchida dinamicamente -->
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" id="closeAreaDetailsBtn">Fechar</button>
            </div>
        </div>
    </div>

    <!-- Success Toast -->
    <div class="toast" id="successToast">
        <div class="toast-content">
            <span class="toast-icon">✅</span>
            <span class="toast-message" id="toastMessage">Operação realizada com sucesso!</span>
        </div>
    </div>

    <script src="admin.js"></script>
</body>
</html>